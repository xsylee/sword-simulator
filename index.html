<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SwordMaster.io (Simplified)</title>
  <style>
    /* Basic Styling */
    body {
      margin: 0;
      overflow: hidden;
      background-color: #87CEEB; /* Light blue sky color */
    }

    #gameCanvas {
      display: block;
      margin: 0 auto;
      background-color: #A9A9A9; /* A gray background */
    }

    #gameCanvasContainer {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
  </style>
</head>
<body>
  <div id="gameCanvasContainer">
    <canvas id="gameCanvas"></canvas>
  </div>

  <script>
    // Setup canvas and context
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Player object
    let player = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      width: 50,
      height: 50,
      speed: 5,
      color: "blue",
      health: 100,
      sword: {
        length: 60,
        width: 10,
        isAttacking: false
      }
    };

    // Enemy object
    let enemies = [];

    // Create a basic enemy
    function createEnemy() {
      let enemy = {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        width: 50,
        height: 50,
        color: "red",
        health: 50
      };
      enemies.push(enemy);
    }

    // Movement functions
    let keys = {};
    window.addEventListener("keydown", (e) => {
      keys[e.key] = true;
    });
    window.addEventListener("keyup", (e) => {
      keys[e.key] = false;
    });

    function movePlayer() {
      if (keys["w"] && player.y > 0) player.y -= player.speed;
      if (keys["a"] && player.x > 0) player.x -= player.speed;
      if (keys["s"] && player.y < canvas.height - player.height) player.y += player.speed;
      if (keys["d"] && player.x < canvas.width - player.width) player.x += player.speed;
    }

    // Sword Attack Mechanism
    function swordAttack() {
      if (keys[" "]) {
        player.sword.isAttacking = true;
        setTimeout(() => {
          player.sword.isAttacking = false;
        }, 200); // Attack lasts for 200ms
      }
    }

    // Draw Player and Sword
    function drawPlayer() {
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.width, player.height);

      if (player.sword.isAttacking) {
        ctx.fillStyle = "yellow";
        ctx.fillRect(player.x + player.width / 2, player.y + player.height / 2 - player.sword.width / 2, player.sword.length, player.sword.width);
      }
    }

    // Draw Enemies
    function drawEnemies() {
      enemies.forEach((enemy) => {
        ctx.fillStyle = enemy.color;
        ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
      });
    }

    // Check for collisions with enemies (sword attack)
    function checkSwordCollision() {
      enemies.forEach((enemy, index) => {
        if (player.sword.isAttacking) {
          if (player.x < enemy.x + enemy.width &&
              player.x + player.width > enemy.x &&
              player.y < enemy.y + enemy.height &&
              player.y + player.height > enemy.y) {
            enemy.health -= 10; // Decrease enemy health
            if (enemy.health <= 0) {
              enemies.splice(index, 1); // Remove enemy from array
            }
          }
        }
      });
    }

    // Game loop
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      movePlayer();
      swordAttack();
      drawPlayer();
      drawEnemies();
      checkSwordCollision();

      // Spawn enemies periodically
      if (Math.random() < 0.01) {
        createEnemy();
      }

      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>